<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions">
<f:view contentType="text/html">
	<h:body>

		<ui:composition template="/template/base.xhtml">

			<ui:define name="content">
				<center>
					<h:panelGrid columns="2">
						<p:panel id="pane" header="Crear proyecto" style="width:500px">
							<h:form id="fproyecto">
								<h:panelGrid columns="3" cellpadding="5">


									<p:outputLabel for="tid" value="Id:" />
									<p:inputText id="tid" value="#{proyectoBean.proyecto.id}"
										disabled="true" />
									<h:message for="tid"></h:message>

									<p:outputLabel for="tnombre" value="Nombre:" />
									<p:inputText id="tnombre"
										value="#{proyectoBean.proyecto.nombre}" />
									<h:message for="tnombre"></h:message>

									<p:outputLabel for="tubicacion" value="ubicacion:" />
									<p:inputText id="tubicacion"
										value="#{proyectoBean.proyecto.ubicacion}" />
									<h:message for="tubicacion"></h:message>



								</h:panelGrid>
								<p:commandButton action="#{proyectoBean.update}"
									value="Actualizar" />
								<p:commandButton action="#{proyectoBean.index}" type="submit"
									value="Regresar" />
							</h:form>
						</p:panel>

						<p:panel id="pane2" header="Añadir Etapa" style="width:500px">
							<h:form id="fetapa">
								<h:panelGrid columns="3" cellpadding="5">



									<p:outputLabel for="tId" value="ID:" />
									<p:inputText id="tId" value="#{proyectoBean.etapa.id}"
										disabled="true" />
									<h:message for="tID"></h:message>

									<p:outputLabel for="tdenominacion" value="Denominacion:" />
									<p:inputText id="tdenominacion"
										value="#{proyectoBean.etapa.denominacion}" />
									<h:message for="tdenominacion"></h:message>

									<p:outputLabel for="tduracion" value="duracion:" />
									<p:inputText id="tduracion"
										value="#{proyectoBean.etapa.duracion}" />
									<h:message for="tduracion"></h:message>





								</h:panelGrid>
								<p:commandButton action="#{proyectoBean.addEtapa}" type="submit"
									value="Añadir" />
							</h:form>
						</p:panel>
					</h:panelGrid>

					<h:panelGrid>
						<center>
							<p:panel id="pane3" header="Etapas" style="width:1000px">
								<p:dataTable id="dtGrupo" var="m"
									value="#{proyectoBean.proyecto.etapas}">
									<p:column style="width:20px; text-align: center;">
										<f:facet name="header">
											<h:outputText value="Id" />
										</f:facet>
										<h:outputText id="tid" value="#{m.id}" />
									</p:column>

									<p:column style="width:140px; text-align: center;">
										<f:facet name="header">
											<h:outputText value="Denominacion" />
										</f:facet>
										<h:outputText id="tdenominacion" value="#{m.denominacion}" />
									</p:column>

									<p:column style="width:140px; text-align: center;">
										<f:facet name="header">
											<h:outputText value="Duracion" />
										</f:facet>
										<h:outputText id="tduracion" value="#{m.duracion}" />
									</p:column>


									<p:column tyle="width:240px; text-align: center;">
										<f:facet name="header">
											<h:outputText value="Operacion" />
										</f:facet>
										<h:form>
											<p:commandButton action="#{proyectoBean.removeEtapa}"
												value="Eliminar"
												onclick="return confirm('¿Confirma que desea dar de Baja este elemento?')">
												<f:setPropertyActionListener value="#{m.id}"
													target="#{proyectoBean.proyecto.id}" />
											</p:commandButton>
										</h:form>
									</p:column>
								</p:dataTable>
							</p:panel>
							<h:form>
								<p:commandButton action="#{proyectoBean.update}"
									value="Actualizar" style="display:none;" />
								<p:commandButton value="Volver al Inicio"
									action="#{usersBean.sessionHome}" style="display:none;" />
							</h:form>
						</center>
					</h:panelGrid>
					</center>
			</ui:define>

		</ui:composition>

	</h:body>

</f:view>
</html>